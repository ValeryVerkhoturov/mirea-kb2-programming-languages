% !TeX program = xelatex
% !TeX encoding = UTF-8
% !TeX root    = listings.tex
\documentclass{../mirea-prog-lang}

\usepackage{hyperref}
\hypersetup{pdftitle={Демонстрация пакета Listings в mirea-prog-lang}, pdfauthor={В. С. Верхотуров}}

\usepackage{listings}
\usepackage{xcolor}
\lstset{basicstyle=\footnotesize, breaklines=true, numbers=left, captionpos=t, showstringspaces=false, commentstyle=\color{teal}, stringstyle=\color{red}, keywordstyle=\color{violet}}  % Настройки, применяемые ко всем листингам

\usepackage{caption}
\captionsetup[lstlisting]{justification=raggedright, singlelinecheck=false}

\begin{document}
	
\tableofcontents
	
\section{Демонстрация пакета listings}

Документацию Listings см. в~\url{https://ctan.org/pkg/listings}.

\subsection{Шаблон для класса документа mirea-prog-lang}
	
См. листинг~\ref{lst:template}.

\begin{lstlisting}[language={[LaTeX]{TeX}}, caption={Шаблон документа}, label=lst:template]
\documentclass{mirea-prog-lang}

\usepackage{hyperref}
\hypersetup{pdftitle={My title}, pdfauthor={My initials and surname}, colorlinks=false, pdfborder={0 0 0}}

\begin{document}

	\begin{titlepage}
		...
	\end{titlepage}
	
	\begin{abstract}
		...
	\end{abstract}
	
	\tableofcontents
	
	% section name should be replaced
	\section*{My introduction}
	\phantomsection
	% content's line name should be replaced
	\addcontentsline{toc}{section}{My introduction}
	...
	
	\section{...}
	...
	
	\appendix
	\section{...}
	...
	
\end{document}
\end{lstlisting}

\subsection{Пример листинга для С++11}

См. листинг~\ref{lst:factorial}.

\begin{lstlisting}[language={[11]{C++}}, caption={Нахождение факториала}, label=lst:factorial]
#include <iostream>
using namespace std;

int main() {
	int n;
	long double factorial = 1.0;
	
	cout << "Enter a positive integer: ";
	cin >> n;
	
	if (n < 0)
	cout << "Error! Factorial of a negative number doesn't exist.";
	else {
		for(int i = 1; i <= n; ++i) {
			factorial *= i;
		}
		cout << "Factorial of " << n << " = " << factorial;    
	}
	
	return 0;
}
\end{lstlisting}


\end{document}